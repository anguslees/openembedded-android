--- gettext-0.18/configure.ac~	Mon Jun 21 21:09:36 2010
+++ gettext-0.18/configure.ac	Mon Jun 21 21:15:16 2010
@@ -34,6 +34,7 @@
 dnl Checks for header files.
 
 dnl Checks for typedefs, structures, and compiler characteristics.
+AC_CHECK_MEMBERS([struct passwd.pw_gecos])
 
 dnl Checks for library functions.
 

--- gettext-0.18/gettext-tools/src/msginit.c~	Mon May 10 04:54:29 2010
+++ gettext-0.18/gettext-tools/src/msginit.c	Mon Jun 21 21:22:15 2010
@@ -1073,7 +1073,7 @@
   struct passwd *pwd;
 
   pwd = get_user_pwd ();
-#if HAVE_PWD_H
+#if HAVE_PWD_H && HAVE_STRUCT_PASSWD_PW_GECOS
   if (pwd != NULL)
     {
       const char *fullname;

